{"openapi":"3.0.0","paths":{"/auth/login":{"post":{"operationId":"AuthController_loginByPassword","summary":"","description":"Auth by remote service and upsert user in database.\nIf remote service not available -> auth by database.","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/LoginDto"}}}},"responses":{"201":{"description":"","content":{"application/json":{"schema":{"type":"string"}}}}}}},"/auth/logout":{"post":{"operationId":"AuthController_logout","summary":"","description":"Logout and invalidate all previously created JWTs.","parameters":[],"responses":{"201":{"description":"","content":{"application/json":{"schema":{"type":"boolean"}}}}},"security":[{"JWT":[]}]}},"/bid":{"post":{"operationId":"BidController_bidCreate","summary":"","description":"Create a bid","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/BidCreateDto"}}}},"responses":{"201":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/BidEntity"}}}}},"security":[{"JWT":[]}]},"patch":{"operationId":"BidController_bidUpdate","summary":"","description":"Update a bid","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/BidUpdateDto"}}}},"responses":{"200":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/BidEntity"}}}}},"security":[{"JWT":[]}]}},"/auction/subscribe/{auctionId}":{"get":{"operationId":"AuctionController_subscribe","summary":"","description":"Subscribe to auction updates","parameters":[{"name":"auctionId","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"200":{"description":""}},"security":[{"JWT":[]}]}},"/auction/{id}":{"get":{"operationId":"AuctionController_getById","summary":"","description":"Get auction by id","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"200":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/AuctionEntity"}}}}},"security":[{"JWT":[]}]}},"/auction/{id}/decide-winner":{"patch":{"operationId":"AuctionController_decideAuctionWinner","summary":"","description":"Decide auction winner","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"200":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/AuctionEntity"}}}}},"security":[{"JWT":[]}]}},"/lot":{"post":{"operationId":"LotController_lotCreate","summary":"","description":"Create a lot","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/LotCreateDto"}}}},"responses":{"201":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/LotEntity"}}}}},"security":[{"JWT":[]}]},"patch":{"operationId":"LotController_lotUpdate","summary":"","description":"Update a lot","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/LotUpdateDto"}}}},"responses":{"200":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/LotEntity"}}}}},"security":[{"JWT":[]}]}},"/lot/{id}":{"delete":{"operationId":"LotController_lotDelete","summary":"","description":"Delete a lot","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"200":{"description":"","content":{"application/json":{"schema":{"type":"boolean"}}}}},"security":[{"JWT":[]}]},"get":{"operationId":"LotController_lotGetById","summary":"","description":"Get a lot by id","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"200":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/LotEntity"}}}}},"security":[{"JWT":[]}]}},"/lot/filtered":{"post":{"operationId":"LotController_lotGetFiltered","summary":"","description":"Get filtered lots","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/LotFilterDto"}}}},"responses":{"201":{"description":"","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/LotEntity"}}}}}},"security":[{"JWT":[]}]}},"/images/image/{imageName}":{"get":{"operationId":"ImageController_imageView","summary":"","description":"View an image.","parameters":[{"name":"imageName","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"200":{"description":""}}}},"/images/{imageName}":{"get":{"operationId":"ImageController_imageDownload","summary":"","description":"Download an image.","parameters":[{"name":"imageName","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"200":{"description":""}}}},"/images/avatar/{imageName}":{"get":{"operationId":"ImageController_avatarGet","summary":"","description":"View an avatar.","parameters":[{"name":"imageName","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"200":{"description":""}}}},"/images/upload":{"post":{"operationId":"ImageController_imageUpload","summary":"","description":"Upload an image, avatar creates automatically.","parameters":[],"responses":{"201":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ImageStoreEntity"}}}}}}},"/images/update/{imageName}/{angle}":{"post":{"operationId":"ImageController_updateImage","summary":"","description":"Update an image.","parameters":[{"name":"imageName","required":true,"in":"path","schema":{"type":"string"}},{"name":"angle","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"201":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ImageStoreEntity"}}}}}}},"/files/upload":{"post":{"operationId":"FilesController_fileUpload","summary":"","description":"Upload a file.","parameters":[],"responses":{"201":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/FileStoreEntity"}}}}}}},"/files/{id}":{"get":{"operationId":"FilesController_fileGet","summary":"","description":"Download a file.","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"200":{"description":""}}}},"/user/user-current":{"get":{"operationId":"UserController_userCurrent","summary":"","description":"Get current authorized user","parameters":[],"responses":{"200":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserEntity"}}}}}}}},"info":{"title":"Auctionator EVM","description":"The Auctionator EVM API description","version":"1.0","contact":{}},"tags":[],"servers":[],"components":{"securitySchemes":{"JWT":{"scheme":"bearer","bearerFormat":"JWT","type":"http"}},"schemas":{"LoginDto":{"type":"object","properties":{"login":{"type":"string","description":"Login email","example":"example@example.com"},"password":{"type":"string","description":"User password","example":"dev"}},"required":["login","password"]},"BidCreateDto":{"type":"object","properties":{"auctionId":{"type":"string","description":"Auction id"},"price":{"type":"number","description":"Price of the bid"}},"required":["auctionId","price"]},"UserEntity":{"type":"object","properties":{"email":{"type":"string","description":"User email."},"role":{"description":"User role.","enum":["Admin","Manager"],"type":"string"},"balance":{"type":"number","description":"User balance."},"id":{"type":"string"},"createdAt":{"format":"date-time","type":"string"},"updatedAt":{"format":"date-time","type":"string"},"deletedAt":{"format":"date-time","type":"string"}},"required":["email","role","balance","id","createdAt","updatedAt"]},"ImageStoreEntity":{"type":"object","properties":{"width":{"type":"number","description":"Image width in pixels after resizing."},"height":{"type":"number","description":"Image height in pixels after resizing."},"url":{"type":"string","description":"URL to view this image, starts with \"/\"."},"downloadUrl":{"type":"string","description":"URL to download this image, starts with \"/\"."},"avatarUrl":{"type":"string","description":"URL to view AVATAR of this image, starts with \"/\"."},"isVisible":{"type":"boolean","description":"Is image visible to users."},"name":{"type":"string","description":"Original file name with extension.\r\"image.jpg\", \"document.pdf\", etc."},"description":{"type":"string","description":"File description if needed."},"ext":{"type":"string","description":"File extension with dot.\r\".jpg\", \".png\", \".pdf\", etc."},"id":{"type":"string"},"createdAt":{"format":"date-time","type":"string"},"updatedAt":{"format":"date-time","type":"string"},"deletedAt":{"format":"date-time","type":"string"}},"required":["isVisible","name","ext","id","createdAt","updatedAt"]},"LotEntity":{"type":"object","properties":{"name":{"type":"string","description":"Name of the lot"},"description":{"type":"string","description":"Description of the lot"},"owner":{"description":"Owner of the lot","allOf":[{"$ref":"#/components/schemas/UserEntity"}]},"images":{"description":"Image of the lot","type":"array","items":{"$ref":"#/components/schemas/ImageStoreEntity"}},"id":{"type":"string"},"createdAt":{"format":"date-time","type":"string"},"updatedAt":{"format":"date-time","type":"string"},"deletedAt":{"format":"date-time","type":"string"}},"required":["name","owner","images","id","createdAt","updatedAt"]},"AuctionEntity":{"type":"object","properties":{"name":{"type":"string","description":"Name of the auction"},"description":{"type":"string","description":"Description of the auction"},"startDate":{"format":"date-time","type":"string","description":"Start date of the auction"},"duration":{"type":"number","description":"Duration of the auction (in seconds)"},"extension":{"type":"number","description":"Extension of the auction (in seconds)","default":0},"startPrice":{"type":"number","description":"Start price of the auction"},"currentPrice":{"type":"number","description":"Current price of the auction"},"remainingTime":{"type":"number","description":"Remaining time of the auction (in seconds)"},"status":{"description":"Auction status","enum":["NOT_STARTED","IN_PROGRESS","FINISHED"],"type":"string"},"lot":{"description":"Lot of the auction","allOf":[{"$ref":"#/components/schemas/LotEntity"}]},"owner":{"description":"Auction owner","allOf":[{"$ref":"#/components/schemas/UserEntity"}]},"winner":{"description":"Auction winner","allOf":[{"$ref":"#/components/schemas/UserEntity"}]},"id":{"type":"string"},"createdAt":{"format":"date-time","type":"string"},"updatedAt":{"format":"date-time","type":"string"},"deletedAt":{"format":"date-time","type":"string"}},"required":["name","description","startDate","duration","extension","startPrice","currentPrice","remainingTime","status","lot","owner","id","createdAt","updatedAt"]},"BidEntity":{"type":"object","properties":{"price":{"type":"number","description":"Price of the bid"},"auction":{"description":"Auction","allOf":[{"$ref":"#/components/schemas/AuctionEntity"}]},"bidder":{"description":"Bidder","allOf":[{"$ref":"#/components/schemas/UserEntity"}]},"status":{"description":"Status of the bid","enum":["ACTIVE","LOST","WON"],"type":"string"},"id":{"type":"string"},"createdAt":{"format":"date-time","type":"string"},"updatedAt":{"format":"date-time","type":"string"},"deletedAt":{"format":"date-time","type":"string"}},"required":["price","auction","bidder","status","id","createdAt","updatedAt"]},"BidUpdateDto":{"type":"object","properties":{"id":{"type":"string","description":"Bid id"},"price":{"type":"number","description":"Price of the bid"}},"required":["id","price"]},"LotCreateDto":{"type":"object","properties":{}},"LotUpdateDto":{"type":"object","properties":{}},"LotFilterDto":{"type":"object","properties":{"ownerId":{"type":"string","description":"Owner id"},"sort":{"type":"string","description":"Sorting (orderBy)"},"skip":{"type":"number","description":"Skip"},"take":{"type":"number","description":"Take"}}},"FileStoreEntity":{"type":"object","properties":{"name":{"type":"string","description":"Original file name with extension.\r\"image.jpg\", \"document.pdf\", etc."},"description":{"type":"string","description":"File description if needed."},"ext":{"type":"string","description":"File extension with dot.\r\".jpg\", \".png\", \".pdf\", etc."},"url":{"type":"string","description":"File URL to get this file from current backend.\rStarts with \"/\"."},"id":{"type":"string"},"createdAt":{"format":"date-time","type":"string"},"updatedAt":{"format":"date-time","type":"string"},"deletedAt":{"format":"date-time","type":"string"}},"required":["name","ext","id","createdAt","updatedAt"]}}}}